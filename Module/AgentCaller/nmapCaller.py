import socket
import json

def callNmapAgent(data):
    # To do: handle exception when connection refuse -> push to queue again
    HOST = '10.211.55.11'
    PORT = 25797
    # the above 2 params must be read from a config file.

    with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as s:
        s.connect((HOST, PORT))
        data = data + '\n' # This just br used for testing perpose.... Actually it will be transfer from queue.
        s.sendall(data.encode('utf-8'))
        data = s.recv(1024)
    
    jData = json.loads(data)
    return jData

def main():
    print(callNmapAgent('{"ip": "nmap.org", "actions": "port"}'))

if __name__ == '__main__':
    main()
